!function($,window,document,_undefined){XenForo.LivePages={};XenForo.LivePages.navigationCache={};XenForo.LivePages.pageNavCache={};function supports_html5_storage(){try{return'localStorage' in window&&window.localStorage!==null}catch(e){return!1}}
    function deleteStartSlash(str){return(str[0]==='/')?str.substr(1):str}
    function addToNavigationCache(url){XenForo.LivePages.navigationCache[url]=$('#messageList').html();XenForo.LivePages.pageNavCache[url]=$('.pageNavLinkGroup').html()}
    function createNavigationCache(){var currentPage=deleteStartSlash(window.location.pathname);addToNavigationCache(currentPage)}
    function isScrolledIntoView(elem){var docViewTop=$(window).scrollTop()+$('#header').height();var docViewBottom=docViewTop+$(window).height();var elemTop=$(elem).offset().top;var elemBottom=elemTop+$(elem).height();return((elemBottom<=docViewBottom)&&(elemTop>=docViewTop))}
    function createNextPageLinkTag(href){$('<link />').attr('rel','next').attr('href',href).appendTo(document.head)}
    function setNextPage(href){var nextPageSelector=$('link[rel="next"]');if(!nextPageSelector.length){createNextPageLinkTag(href)}else{nextPageSelector.attr('href',href)}}
    function deleteNextPage(){$('link[rel="next"]').remove()}
    function unbindWindowScrollEvent(){$(window).off('scroll')}
    function getNextPageHref(){return $('link[rel="next"]').attr('href')}
    var setHistoryStateHandler=function(){var self=this;window.onpopstate=function(event){if(event.state&&event.state.page){if(XenForo.LivePages.navigationCache[event.state.page]&&XenForo.LivePages.navigationCache[event.state.page].length>0){var $messageList=$('#messageList');$messageList.html(XenForo.LivePages.navigationCache[event.state.page]).xfShow();$messageList.children('li').css('opacity',1);$('.pageNavLinkGroup').html(XenForo.LivePages.pageNavCache[event.state.page]).xfActivate()}}}};$(function(){if(history.pushState){setHistoryStateHandler()}});XenForo.LivePageLoading=function($pageNav){this.__construct($pageNav)};XenForo.LivePageLoading.prototype={__construct:function($pageNav){this.$pageNav=$pageNav;this.parentClass='.pageNavLinkGroup';this.$mask=$('#LivePageLoadingMask');this.timer=undefined;this.href=undefined;this.setPaginationHandler()},setPageUrl:function(url){history.pushState({page:url,type:"page"},document.title,url)},scroll:function(){if(isScrolledIntoView($(this.parentClass))){if(this.$pageNav.hasClass('fixed')){this.$pageNav.removeClass('fixed')}}else{if(!this.$pageNav.hasClass('fixed')){this.$pageNav.addClass('fixed')}}},setPageNavWidth:function(){this.$pageNav.css({'width':this.$pageNav.children().width()})},setPaginationHandler:function(activate){var self=this;this.$pageNav.find('a[href]:not(.currentPage)').on('click',function(e){e.preventDefault();createNavigationCache();self.showMask();self.href=$(this).attr('href');XenForo.ajax(self.href,{},$.context(self,'changePage'))});this.setPageNavWidth();if(activate){}
            $(window).on('load scroll',$.context(this,'scroll'));this.scroll()},showMask:function(){animateCSS(this.$mask.get(0),['animated','fadeIn','fast']);this.$mask.addClass('visible')},hideMask:function(){animateCSS($('#messageList').get(0),['animated','fadeIn','faster']);animateCSS(this.$mask.get(0),['animated','fadeOut','fast']);this.$mask.removeClass('visible')},changePage:function(ajaxData){if(!XenForo.hasResponseError(ajaxData)){var $messageList=$('#messageList');if(XenForo.isTouchBrowser()){$('html, body').animate({scrollTop:0})}else{if($(window).scrollTop()>this.$pageNav.offset().top)
        {$('html, body').animate({scrollTop:this.$pageNav.offset().top})}}
            $messageList.html('');this.hideMask();$(ajaxData.templateHtml).xfInsert('appendTo',$messageList,'xfFadeIn',50);this.setPageUrl(this.href);this.$mask=$('#LivePageLoadingMask');if(ajaxData.nextPageHref){setNextPage(ajaxData.nextPageHref);var obj=XenForo.create('XenForo.InfinitiveThreadPosts','#messageList');obj.bindWindowScrollEvent()}else{deleteNextPage()}
            this.replacePageNav(ajaxData.pageNav);var fr=XenForo.create('XenForo.FloatingRedactor','.FloatingRedactor');if(fr!==undefined){fr.pageScroll()}
            var $lastPostDate=$('#messageList').find('.DateTime').last().data('time');$('input[name="last_date"]').val($lastPostDate);$('input[name="last_known_date"]').val($lastPostDate)}},replacePageNav:function(pageNav){this.$pageNav=$(pageNav).replaceAll(this.$pageNav);this.setPaginationHandler(!0)}};XenForo.InfinitiveThreadPosts=function($messageList){this.__construct($messageList)};XenForo.InfinitiveThreadPosts.prototype={__construct:function($messageList){this.$destination=$messageList;this.inProgress=!1;this.nextPage=getNextPageHref();this.bindWindowScrollEvent()},bindWindowScrollEvent:function(){},pageScroll:function(){if(this.$destination.children().length>=20){if((isScrolledIntoView(this.$destination.find('.message:eq(-5)'))||isScrolledIntoView(this.$destination.find('.message:last')))&&!this.inProgress){this.inProgress=!0;this.loadNextPage()}}},loadNextPage:function(){var page=getNextPageHref();if(page){XenForo.ajax(getNextPageHref(),{'_next_page_loading':!0},$.context(this,'nextPageLoadingCallback'),{global:!1})}else{}},replacePageNav:function(pageNav){$(pageNav).replaceAll('.PageNav');$('.PageNav').parent().xfActivate()},insertContent:function(ajaxData,insertMethod){$(ajaxData.templateHtml).xfInsert('appendTo',this.$destination,'fadeIn',50,function(){this.inProgress=!1}.bind(this))},nextPageLoadingCallback:function(ajaxData,textStatus){if(!XenForo.hasResponseError(ajaxData,textStatus)){this.insertContent(ajaxData);if(ajaxData.pageNav){this.replacePageNav(ajaxData.pageNav)}
            if(ajaxData.nextPageHref){setNextPage(ajaxData.nextPageHref);if(!this.nextPage){$(window).on('load scroll',$.context(this,'pageScroll'))}
                this.nextPage=ajaxData.nextPageHref}else{deleteNextPage()}
            $('input[name="last_date"]').val(ajaxData.lastDate)}}};XenForo.FloatingRedactor=function($f){this.__construct($f)};XenForo.FloatingRedactor.prototype={__construct:function($f){this.$form=$f;this.$helper=$('.FloatingRedactorHelper');this.setFormWidth();if(!XenForo.isTouchBrowser()){$(window).on('load scroll',$.context(this,'pageScroll'))}},setFormWidth:function(){this.$form.width($('#messageList').width())},pageScroll:function(){if(this.$form.height()<$(window).height()/3)
        {if(isScrolledIntoView(this.$helper)){if(this.$form.hasClass('fixed')){this.$form.removeClass('fixed')}}else{if(!this.$form.hasClass('fixed')){this.$form.addClass('fixed')}}}}};XenForo.hiddenReply=function($trigger){$trigger.on('click',function(e){e.preventDefault();var $form=$('#QuickReply'),xhr=null;$form.data('QuickReply').scrollAndFocus();var ed=XenForo.getEditorInForm($form);if(!ed){return!1}
        var $insertContent='[USERS='+$trigger.data('username')+']@'+$trigger.data('username')+', <span></span>[/USERS]';if(ed.$editor){ed.insertHtml($insertContent);if(ed.$editor.data('xenForoElastic')){ed.$editor.data('xenForoElastic')()}}else{ed.val(ed.val()+$insertContent)}
        var last=ed.getSelectedNode().childNodes[0].length;var range=document.createRange();var sel=ed.window.getSelection();range.setStart(ed.getSelectedNode().childNodes[0],last);range.collapse(!0);sel.removeAllRanges();sel.addRange(range);return!1})};XenForo.ForumSearchThreadsButton=function($link){var $target=$($link.attr('rel'));var timer=null;$link.live('mouseenter',function(){if(timer)clearTimeout(timer);if(!$target.hasClass('active'))$target.addClass('active'),$link.addClass('active')}).live('mouseleave',function(){if($target.hasClass('active')&&!$target.hasClass('pinned')){if(timer)clearTimeout(timer);timer=setTimeout(function(){$target.removeClass("active");$link.removeClass('active')},1000)}})};XenForo.ForumSearchThreadsPinButton=function($button){var localStoragePinnedKey='ForumSearchThreadsPinned';var $target=$($button.parent().attr('rel'));if(!supports_html5_storage()){$button.remove()}
        if(localStorage.getItem(localStoragePinnedKey)){$target.addClass('pinned');$button.addClass('pinned')}
        $button.on('click',function(){if($button.hasClass('pinned')){localStorage.removeItem(localStoragePinnedKey);$button.removeClass('pinned');$target.removeClass('pinned')}else{localStorage.setItem(localStoragePinnedKey,'1');$button.addClass('pinned');$target.addClass('pinned')}})};XenForo.ForumSearchThreadsMenu=function($container){var index=$container.find('.current').index();var $content=$container.find('.scrollBar');if(index>=4){var threadHeight=$container.find('.discussionList').children().outerHeight();var futureScrollPos=threadHeight*(index-4);$content.scrollTop(futureScrollPos)}
        $content.addClass('scrollbar-macosx scrollbar-dynamic').scrollbar()};XenForo.PostCommentButton=function($button)
    {$button.on('click',function(){var $message=$button.closest('li'),$post;var $scrollTo=$('#'+$message.attr('id'));var $username=$message.find('.username').wrapInner('<span class="username"></span>').html();var $postLink=$message.find('.hashPermalink').attr('href');var $quickReply=$('#QuickReply');var $box=$quickReply.find('.MessageReplyBox');if($message.hasClass('message'))
    {$post=$message}
    else{$post=$message.closest('li.message')}
        $quickReply.data('commentingMessage',$post);const postId=$post.attr('id').split('-')[1];$quickReply.attr('action',`posts/${postId}/comment`);$box.find('.Content').html($box.find('.Content').data('content').replace('{{username}}',$username)).attr('href',$postLink).unbind('click').on('click',function(e){e.preventDefault();if(!isScrolledIntoView($scrollTo))
        {$('html, body').animate({scrollTop:$scrollTo.offset().top-44},0)}
            XenForo.animateBackgroundColor($scrollTo)});$box.show();$box.find('.Cancel').on('click',function(){$box.hide();$quickReply.data('commentingMessage','');$quickReply.attr('action',$quickReply.data('def-action'))})})};XenForo.animateBackgroundColor=function($el)
    {const defaultBackgroundColor=$el.css('background-color');$el.animate({backgroundColor:'rgb(45,45,45)'},300,function(){setTimeout(()=>{$el.animate({backgroundColor:defaultBackgroundColor},300)},2000)})};XenForo.CommentQuickReply=function($form)
    {$form.on('AutoValidationComplete',function(e){if(!$form.data('commentingMessage'))
    {return}
        var $post=$form.data('commentingMessage'),$dest=$post.find('.CommentPostList'),$scrollTo;$(e.ajaxData.comment).xfInsert('appendTo',$post.find('.CommentPostList'),'xfFadeIn');if($dest.children().last().offset().top<$(window).height()+$post.offset().top)
        {$scrollTo=$post}
        else{$scrollTo=$dest.children().last()}
        $form.find('.MessageReplyBox .Cancel').trigger('click');if(!isScrolledIntoView($scrollTo))
        {$('html, body').animate({scrollTop:$scrollTo.offset().top-44},0)}
        XenForo.animateBackgroundColor($dest.children().last())})};XenForo.CommentLoader=function($element){this.__construct($element)};XenForo.CommentLoader.prototype={__construct:function($link)
        {this.$link=$link;$link.click($.context(this,'click'))},click:function(e)
        {var params=this.$link.data('loadparams');if(typeof params!='object')
        {params={}}
            e.preventDefault();XenForo.ajax(this.$link.attr('href'),params,$.context(this,'loadSuccess'),{type:'GET'})},loadSuccess:function(ajaxData)
        {var $replace,replaceSelector=this.$link.data('replace'),i;if(XenForo.hasResponseError(ajaxData))
        {return!1}
            if(replaceSelector)
            {$replace=$(replaceSelector)}
            else{$replace=this.$link.parent()}
            if(ajaxData.comments&&ajaxData.comments.length)
            {new XenForo.ExtLoader(ajaxData,function(data)
            {for(i=0;i<ajaxData.comments.length;i++)
            {$(ajaxData.comments[i]).xfInsert('insertBefore',$replace)}
                $replace.xfHide()})}
            else{$replace.xfRemove()}}};XenForo.register('._hiddenReplyButton','XenForo.hiddenReply');XenForo.register('#messageList','XenForo.InfinitiveThreadPosts');XenForo.register('.PageNav','XenForo.LivePageLoading');XenForo.register('.FloatingRedactor','XenForo.FloatingRedactor');XenForo.register('._forumSearchThreadsMenu','XenForo.ForumSearchThreadsMenu');XenForo.register('._forumSearchThreadsButton','XenForo.ForumSearchThreadsButton');XenForo.register('._forumSearchThreads--pinButton','XenForo.ForumSearchThreadsPinButton');XenForo.register('.PostCommentButton','XenForo.PostCommentButton');XenForo.register('#QuickReply','XenForo.CommentQuickReply');XenForo.register('a.CommentLoader','XenForo.CommentLoader')}(jQuery,this,document)